{"ast":null,"code":"import _objectSpread from\"/Users/chaitra/Desktop/EduTrack/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{useNavigate,Link}from'react-router-dom';import{signup}from'../api';import'./Auth.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Signup=()=>{const[formData,setFormData]=useState({name:'',email:'',user_name:'',password:''});const[confirmPassword,setConfirmPassword]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));setError('');};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');// Validate password match\nif(formData.password!==confirmPassword){setError('Passwords do not match. Please try again.');setLoading(false);return;}// Automatically detect role based on email\nconst detectedRole=formData.email.toLowerCase().includes('admin')?'admin':'student';const signupData=_objectSpread(_objectSpread({},formData),{},{role:detectedRole});try{await signup(signupData);navigate('/login');}catch(err){console.error('Signup error:',err);if(err.response){var _err$response,_err$response$data,_err$response2,_err$response2$data;// Server responded with error\nsetError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Signup failed. Please try again.');}else if(err.request){// Request made but no response (network error)\nsetError('Cannot connect to server. Make sure the backend is running on http://localhost:8000');}else{// Something else happened\nsetError(err.message||'Signup failed. Please try again.');}}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign up for EduTrack\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",value:formData.name,onChange:handleChange,required:true,placeholder:\"Enter your full name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleChange,required:true,placeholder:\"Enter your email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"user_name\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"user_name\",name:\"user_name\",value:formData.user_name,onChange:handleChange,required:true,placeholder:\"Choose a username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleChange,required:true,placeholder:\"Create a password\",minLength:\"6\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"confirmPassword\",name:\"confirmPassword\",value:confirmPassword,onChange:e=>{setConfirmPassword(e.target.value);setError('');},required:true,placeholder:\"Confirm your password\",minLength:\"6\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",disabled:loading,children:loading?'Creating account...':'Sign Up'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"auth-link\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login here\"})]})]})});};export default Signup;","map":{"version":3,"names":["React","useState","useNavigate","Link","signup","jsx","_jsx","jsxs","_jsxs","Signup","formData","setFormData","name","email","user_name","password","confirmPassword","setConfirmPassword","error","setError","loading","setLoading","navigate","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","detectedRole","toLowerCase","includes","signupData","role","err","console","response","_err$response","_err$response$data","_err$response2","_err$response2$data","data","detail","message","request","className","children","onSubmit","htmlFor","type","id","onChange","required","placeholder","minLength","disabled","to"],"sources":["/Users/chaitra/Desktop/EduTrack/frontend/src/components/Signup.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { signup } from '../api';\nimport './Auth.css';\n\nconst Signup = () => {\n    const [formData, setFormData] = useState({\n        name: '',\n        email: '',\n        user_name: '',\n        password: '',\n    });\n    const [confirmPassword, setConfirmPassword] = useState('');\n    const [error, setError] = useState('');\n    const [loading, setLoading] = useState(false);\n    const navigate = useNavigate();\n\n    const handleChange = (e) => {\n        setFormData({\n            ...formData,\n            [e.target.name]: e.target.value,\n        });\n        setError('');\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setLoading(true);\n        setError('');\n\n        // Validate password match\n        if (formData.password !== confirmPassword) {\n            setError('Passwords do not match. Please try again.');\n            setLoading(false);\n            return;\n        }\n\n        // Automatically detect role based on email\n        const detectedRole = formData.email.toLowerCase().includes('admin') ? 'admin' : 'student';\n        const signupData = {\n            ...formData,\n            role: detectedRole\n        };\n\n        try {\n            await signup(signupData);\n            navigate('/login');\n        } catch (err) {\n            console.error('Signup error:', err);\n            if (err.response) {\n                // Server responded with error\n                setError(err.response?.data?.detail || err.response?.data?.message || 'Signup failed. Please try again.');\n            } else if (err.request) {\n                // Request made but no response (network error)\n                setError('Cannot connect to server. Make sure the backend is running on http://localhost:8000');\n            } else {\n                // Something else happened\n                setError(err.message || 'Signup failed. Please try again.');\n            }\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"auth-container\">\n            <div className=\"auth-card\">\n                <h2>Sign up for EduTrack</h2>\n                <form onSubmit={handleSubmit}>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"name\">Full Name</label>\n                        <input\n                            type=\"text\"\n                            id=\"name\"\n                            name=\"name\"\n                            value={formData.name}\n                            onChange={handleChange}\n                            required\n                            placeholder=\"Enter your full name\"\n                        />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"email\">Email</label>\n                        <input\n                            type=\"email\"\n                            id=\"email\"\n                            name=\"email\"\n                            value={formData.email}\n                            onChange={handleChange}\n                            required\n                            placeholder=\"Enter your email\"\n                        />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"user_name\">Username</label>\n                        <input\n                            type=\"text\"\n                            id=\"user_name\"\n                            name=\"user_name\"\n                            value={formData.user_name}\n                            onChange={handleChange}\n                            required\n                            placeholder=\"Choose a username\"\n                        />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"password\">Password</label>\n                        <input\n                            type=\"password\"\n                            id=\"password\"\n                            name=\"password\"\n                            value={formData.password}\n                            onChange={handleChange}\n                            required\n                            placeholder=\"Create a password\"\n                            minLength=\"6\"\n                        />\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label htmlFor=\"confirmPassword\">Confirm Password</label>\n                        <input\n                            type=\"password\"\n                            id=\"confirmPassword\"\n                            name=\"confirmPassword\"\n                            value={confirmPassword}\n                            onChange={(e) => {\n                                setConfirmPassword(e.target.value);\n                                setError('');\n                            }}\n                            required\n                            placeholder=\"Confirm your password\"\n                            minLength=\"6\"\n                        />\n                    </div>\n\n                    {error && <div className=\"error-message\">{error}</div>}\n\n                    <button type=\"submit\" className=\"submit-btn\" disabled={loading}>\n                        {loading ? 'Creating account...' : 'Sign Up'}\n                    </button>\n                </form>\n\n                <p className=\"auth-link\">\n                    Already have an account? <Link to=\"/login\">Login here</Link>\n                </p>\n            </div>\n        </div>\n    );\n};\n\nexport default Signup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}