{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import{getCourse,getCourseVideos,updateVideoProgress}from'../api';import VideoPlayer from'./VideoPlayer';import'./CourseDetail.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CourseDetail=()=>{const{courseId}=useParams();const navigate=useNavigate();const[course,setCourse]=useState(null);const[videos,setVideos]=useState([]);const[selectedVideo,setSelectedVideo]=useState(null);const[selectedVideoIndex,setSelectedVideoIndex]=useState(0);const[playlistSearch,setPlaylistSearch]=useState('');const[loading,setLoading]=useState(true);const[error,setError]=useState('');const watchStartTimeRef=useRef(null);const progressIntervalRef=useRef(null);useEffect(()=>{const fetchCourseData=async()=>{try{setLoading(true);const[courseData,videosData]=await Promise.all([getCourse(courseId),getCourseVideos(courseId)]);setCourse(courseData);setVideos(videosData);if(videosData.length>0){setSelectedVideo(videosData[0]);setSelectedVideoIndex(0);}}catch(err){setError('Failed to load course. Please try again.');console.error('Error fetching course:',err);}finally{setLoading(false);}};fetchCourseData();},[courseId]);const extractVideoId=url=>{if(!url)return null;if(url.includes('googlevideo.com')){console.warn('Direct playback URL detected, cannot extract video ID:',url);return null;}let match=url.match(/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/)([a-zA-Z0-9_-]{11})/);if(match)return match[1];match=url.match(/[?&]v=([a-zA-Z0-9_-]{11})/);if(match)return match[1];match=url.match(/youtu\\.be\\/([a-zA-Z0-9_-]{11})/);if(match)return match[1];match=url.match(/youtube\\.com\\/embed\\/([a-zA-Z0-9_-]{11})/);if(match)return match[1];if(/^[a-zA-Z0-9_-]{11}$/.test(url.trim())){return url.trim();}return null;};const handleVideoSelect=(video,index)=>{setSelectedVideo(video);setSelectedVideoIndex(index);// Scroll to top of video player\nwindow.scrollTo({top:0,behavior:'smooth'});};const handleNextVideo=()=>{if(selectedVideoIndex<videos.length-1){const nextIndex=selectedVideoIndex+1;handleVideoSelect(videos[nextIndex],nextIndex);}};const handlePreviousVideo=()=>{if(selectedVideoIndex>0){const prevIndex=selectedVideoIndex-1;handleVideoSelect(videos[prevIndex],prevIndex);}};const handleVideoEnd=()=>{// Auto-play next video when current video ends\nif(selectedVideoIndex<videos.length-1){handleNextVideo();}};const handleProgressUpdate=async(courseId,videoId,watchTime)=>{try{await updateVideoProgress(courseId,videoId,watchTime);}catch(err){console.error('Error updating progress:',err);}};const handleVideoStart=()=>{// Start tracking watch time when video starts playing\nwatchStartTimeRef.current=Date.now();if(progressIntervalRef.current){clearInterval(progressIntervalRef.current);}progressIntervalRef.current=setInterval(()=>{if(watchStartTimeRef.current&&selectedVideo){const elapsedSeconds=Math.floor((Date.now()-watchStartTimeRef.current)/1000);if(elapsedSeconds>=10){// Update progress after 10 seconds\nhandleProgressUpdate(parseInt(courseId),selectedVideo.id,elapsedSeconds);}}},5000);// Check every 5 seconds\n};useEffect(()=>{// Clean up interval on unmount\nreturn()=>{if(progressIntervalRef.current){clearInterval(progressIntervalRef.current);}};},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"course-detail-loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:\"Loading course...\"})});}if(error||!course){return/*#__PURE__*/_jsxs(\"div\",{className:\"course-detail-error\",children:[/*#__PURE__*/_jsx(\"p\",{children:error||'Course not found'}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"btn-back\",children:\"Back to Dashboard\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"course-detail\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"course-nav\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"logo-link\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"EduTrack\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-links\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"nav-link\",children:\"Back to Dashboard\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"course-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"course-title\",children:course.course_title}),course.link&&/*#__PURE__*/_jsxs(\"p\",{className:\"course-playlist-info\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:[/*#__PURE__*/_jsx(\"rect\",{x:\"3\",y:\"3\",width:\"18\",height:\"18\",rx:\"2\",ry:\"2\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"9\",y1:\"9\",x2:\"15\",y2:\"9\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"9\",y1:\"15\",x2:\"15\",y2:\"15\"})]}),\"YouTube Playlist Course\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"course-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"video-section\",children:[selectedVideo&&/*#__PURE__*/_jsxs(\"div\",{className:\"video-player-container\",children:[/*#__PURE__*/_jsx(VideoPlayer,{videoId:extractVideoId(selectedVideo.video_link),videoUrl:selectedVideo.video_link,onVideoEnd:handleVideoEnd,courseId:parseInt(courseId),videoDbId:selectedVideo.id,onProgressUpdate:handleProgressUpdate,onVideoStart:handleVideoStart}),/*#__PURE__*/_jsx(\"div\",{className:\"video-info\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"video-info-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"current-video-title\",children:selectedVideo.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"video-navigation\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"nav-video-btn\",onClick:handlePreviousVideo,disabled:selectedVideoIndex===0,title:\"Previous video\",children:[/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"polyline\",{points:\"15 18 9 12 15 6\"})}),\"Previous\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"video-counter\",children:[selectedVideoIndex+1,\" / \",videos.length]}),/*#__PURE__*/_jsxs(\"button\",{className:\"nav-video-btn\",onClick:handleNextVideo,disabled:selectedVideoIndex===videos.length-1,title:\"Next video\",children:[\"Next\",/*#__PURE__*/_jsx(\"svg\",{width:\"20\",height:\"20\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"polyline\",{points:\"9 18 15 12 9 6\"})})]})]})]})})]}),!selectedVideo&&videos.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"no-videos\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No videos available for this course.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"video-list-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"video-list-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"video-list-title\",children:[\"Course Videos (\",videos.length,\")\"]}),videos.length>5&&/*#__PURE__*/_jsx(\"div\",{className:\"playlist-search\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search videos...\",value:playlistSearch,onChange:e=>setPlaylistSearch(e.target.value),className:\"playlist-search-input\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video-list\",children:videos.filter(video=>playlistSearch===''||video.title.toLowerCase().includes(playlistSearch.toLowerCase())).map((video,index)=>{const originalIndex=videos.indexOf(video);const videoId=extractVideoId(video.video_link);const isSelected=selectedVideo&&selectedVideo.id===video.id;return/*#__PURE__*/_jsxs(\"div\",{className:\"video-item \".concat(isSelected?'active':''),onClick:()=>handleVideoSelect(video,originalIndex),children:[/*#__PURE__*/_jsx(\"div\",{className:\"video-item-number\",children:originalIndex+1}),/*#__PURE__*/_jsx(\"div\",{className:\"video-item-thumbnail\",children:videoId?/*#__PURE__*/_jsx(\"img\",{src:\"https://img.youtube.com/vi/\".concat(videoId,\"/mqdefault.jpg\"),alt:video.title,onError:e=>{e.target.src='https://via.placeholder.com/160x90?text=Video';}}):/*#__PURE__*/_jsx(\"div\",{className:\"thumbnail-placeholder\",children:\"\\uD83D\\uDCF9\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"video-item-info\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"video-item-title\",children:video.title})})]},video.id);})})]})]})]})]});};export default CourseDetail;","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","Link","getCourse","getCourseVideos","updateVideoProgress","VideoPlayer","jsx","_jsx","jsxs","_jsxs","CourseDetail","courseId","navigate","course","setCourse","videos","setVideos","selectedVideo","setSelectedVideo","selectedVideoIndex","setSelectedVideoIndex","playlistSearch","setPlaylistSearch","loading","setLoading","error","setError","watchStartTimeRef","progressIntervalRef","fetchCourseData","courseData","videosData","Promise","all","length","err","console","extractVideoId","url","includes","warn","match","test","trim","handleVideoSelect","video","index","window","scrollTo","top","behavior","handleNextVideo","nextIndex","handlePreviousVideo","prevIndex","handleVideoEnd","handleProgressUpdate","videoId","watchTime","handleVideoStart","current","Date","now","clearInterval","setInterval","elapsedSeconds","Math","floor","parseInt","id","className","children","to","course_title","link","width","height","viewBox","fill","stroke","strokeWidth","x","y","rx","ry","x1","y1","x2","y2","video_link","videoUrl","onVideoEnd","videoDbId","onProgressUpdate","onVideoStart","title","onClick","disabled","points","type","placeholder","value","onChange","e","target","filter","toLowerCase","map","originalIndex","indexOf","isSelected","concat","src","alt","onError"],"sources":["/Users/chaitra/Desktop/EduTrack/frontend/src/components/CourseDetail.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { getCourse, getCourseVideos, updateVideoProgress } from '../api';\nimport VideoPlayer from './VideoPlayer';\nimport './CourseDetail.css';\n\nconst CourseDetail = () => {\n    const { courseId } = useParams();\n    const navigate = useNavigate();\n    const [course, setCourse] = useState(null);\n    const [videos, setVideos] = useState([]);\n    const [selectedVideo, setSelectedVideo] = useState(null);\n    const [selectedVideoIndex, setSelectedVideoIndex] = useState(0);\n    const [playlistSearch, setPlaylistSearch] = useState('');\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState('');\n    const watchStartTimeRef = useRef(null);\n    const progressIntervalRef = useRef(null);\n\n    useEffect(() => {\n        const fetchCourseData = async () => {\n            try {\n                setLoading(true);\n                const [courseData, videosData] = await Promise.all([\n                    getCourse(courseId),\n                    getCourseVideos(courseId)\n                ]);\n                setCourse(courseData);\n                setVideos(videosData);\n                if (videosData.length > 0) {\n                    setSelectedVideo(videosData[0]);\n                    setSelectedVideoIndex(0);\n                }\n            } catch (err) {\n                setError('Failed to load course. Please try again.');\n                console.error('Error fetching course:', err);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchCourseData();\n    }, [courseId]);\n\n    const extractVideoId = (url) => {\n        if (!url) return null;\n\n        if (url.includes('googlevideo.com')) {\n            console.warn('Direct playback URL detected, cannot extract video ID:', url);\n            return null;\n        }\n\n        let match = url.match(/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/)([a-zA-Z0-9_-]{11})/);\n        if (match) return match[1];\n\n        match = url.match(/[?&]v=([a-zA-Z0-9_-]{11})/);\n        if (match) return match[1];\n\n        match = url.match(/youtu\\.be\\/([a-zA-Z0-9_-]{11})/);\n        if (match) return match[1];\n\n        match = url.match(/youtube\\.com\\/embed\\/([a-zA-Z0-9_-]{11})/);\n        if (match) return match[1];\n\n        if (/^[a-zA-Z0-9_-]{11}$/.test(url.trim())) {\n            return url.trim();\n        }\n\n        return null;\n    };\n\n    const handleVideoSelect = (video, index) => {\n        setSelectedVideo(video);\n        setSelectedVideoIndex(index);\n        // Scroll to top of video player\n        window.scrollTo({ top: 0, behavior: 'smooth' });\n    };\n\n    const handleNextVideo = () => {\n        if (selectedVideoIndex < videos.length - 1) {\n            const nextIndex = selectedVideoIndex + 1;\n            handleVideoSelect(videos[nextIndex], nextIndex);\n        }\n    };\n\n    const handlePreviousVideo = () => {\n        if (selectedVideoIndex > 0) {\n            const prevIndex = selectedVideoIndex - 1;\n            handleVideoSelect(videos[prevIndex], prevIndex);\n        }\n    };\n\n    const handleVideoEnd = () => {\n        // Auto-play next video when current video ends\n        if (selectedVideoIndex < videos.length - 1) {\n            handleNextVideo();\n        }\n    };\n\n    const handleProgressUpdate = async (courseId, videoId, watchTime) => {\n        try {\n            await updateVideoProgress(courseId, videoId, watchTime);\n        } catch (err) {\n            console.error('Error updating progress:', err);\n        }\n    };\n\n    const handleVideoStart = () => {\n        // Start tracking watch time when video starts playing\n        watchStartTimeRef.current = Date.now();\n        \n        if (progressIntervalRef.current) {\n            clearInterval(progressIntervalRef.current);\n        }\n        \n        progressIntervalRef.current = setInterval(() => {\n            if (watchStartTimeRef.current && selectedVideo) {\n                const elapsedSeconds = Math.floor((Date.now() - watchStartTimeRef.current) / 1000);\n                if (elapsedSeconds >= 10) {\n                    // Update progress after 10 seconds\n                    handleProgressUpdate(parseInt(courseId), selectedVideo.id, elapsedSeconds);\n                }\n            }\n        }, 5000); // Check every 5 seconds\n    };\n\n    useEffect(() => {\n        // Clean up interval on unmount\n        return () => {\n            if (progressIntervalRef.current) {\n                clearInterval(progressIntervalRef.current);\n            }\n        };\n    }, []);\n\n    if (loading) {\n        return (\n            <div className=\"course-detail-loading\">\n                <div className=\"loading-spinner\">Loading course...</div>\n            </div>\n        );\n    }\n\n    if (error || !course) {\n        return (\n            <div className=\"course-detail-error\">\n                <p>{error || 'Course not found'}</p>\n                <Link to=\"/dashboard\" className=\"btn-back\">Back to Dashboard</Link>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"course-detail\">\n            <nav className=\"course-nav\">\n                <div className=\"nav-container\">\n                    <Link to=\"/dashboard\" className=\"logo-link\">\n                        <h1>EduTrack</h1>\n                    </Link>\n                    <div className=\"nav-links\">\n                        <Link to=\"/dashboard\" className=\"nav-link\">Back to Dashboard</Link>\n                    </div>\n                </div>\n            </nav>\n\n            <div className=\"course-content\">\n                <div className=\"course-header\">\n                    <h1 className=\"course-title\">{course.course_title}</h1>\n                    {course.link && (\n                        <p className=\"course-playlist-info\">\n                            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n                                <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"9\"></line>\n                                <line x1=\"9\" y1=\"15\" x2=\"15\" y2=\"15\"></line>\n                            </svg>\n                            YouTube Playlist Course\n                        </p>\n                    )}\n                </div>\n\n                <div className=\"course-main\">\n                    <div className=\"video-section\">\n                        {selectedVideo && (\n                            <div className=\"video-player-container\">\n                                <VideoPlayer\n                                    videoId={extractVideoId(selectedVideo.video_link)}\n                                    videoUrl={selectedVideo.video_link}\n                                    onVideoEnd={handleVideoEnd}\n                                    courseId={parseInt(courseId)}\n                                    videoDbId={selectedVideo.id}\n                                    onProgressUpdate={handleProgressUpdate}\n                                    onVideoStart={handleVideoStart}\n                                />\n                                <div className=\"video-info\">\n                                    <div className=\"video-info-header\">\n                                        <h2 className=\"current-video-title\">{selectedVideo.title}</h2>\n                                        <div className=\"video-navigation\">\n                                            <button\n                                                className=\"nav-video-btn\"\n                                                onClick={handlePreviousVideo}\n                                                disabled={selectedVideoIndex === 0}\n                                                title=\"Previous video\"\n                                            >\n                                                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                                    <polyline points=\"15 18 9 12 15 6\"></polyline>\n                                                </svg>\n                                                Previous\n                                            </button>\n                                            <span className=\"video-counter\">\n                                                {selectedVideoIndex + 1} / {videos.length}\n                                            </span>\n                                            <button\n                                                className=\"nav-video-btn\"\n                                                onClick={handleNextVideo}\n                                                disabled={selectedVideoIndex === videos.length - 1}\n                                                title=\"Next video\"\n                                            >\n                                                Next\n                                                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                                    <polyline points=\"9 18 15 12 9 6\"></polyline>\n                                                </svg>\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                        {!selectedVideo && videos.length === 0 && (\n                            <div className=\"no-videos\">\n                                <p>No videos available for this course.</p>\n                            </div>\n                        )}\n                    </div>\n\n                    <div className=\"video-list-section\">\n                        <div className=\"video-list-header\">\n                            <h3 className=\"video-list-title\">Course Videos ({videos.length})</h3>\n                            {videos.length > 5 && (\n                                <div className=\"playlist-search\">\n                                    <input\n                                        type=\"text\"\n                                        placeholder=\"Search videos...\"\n                                        value={playlistSearch}\n                                        onChange={(e) => setPlaylistSearch(e.target.value)}\n                                        className=\"playlist-search-input\"\n                                    />\n                                </div>\n                            )}\n                        </div>\n                        <div className=\"video-list\">\n                            {videos\n                                .filter((video) => \n                                    playlistSearch === '' || \n                                    video.title.toLowerCase().includes(playlistSearch.toLowerCase())\n                                )\n                                .map((video, index) => {\n                                const originalIndex = videos.indexOf(video);\n                                const videoId = extractVideoId(video.video_link);\n                                const isSelected = selectedVideo && selectedVideo.id === video.id;\n                                return (\n                                    <div\n                                        key={video.id}\n                                        className={`video-item ${isSelected ? 'active' : ''}`}\n                                        onClick={() => handleVideoSelect(video, originalIndex)}\n                                    >\n                                        <div className=\"video-item-number\">{originalIndex + 1}</div>\n                                        <div className=\"video-item-thumbnail\">\n                                            {videoId ? (\n                                                <img\n                                                    src={`https://img.youtube.com/vi/${videoId}/mqdefault.jpg`}\n                                                    alt={video.title}\n                                                    onError={(e) => {\n                                                        e.target.src = 'https://via.placeholder.com/160x90?text=Video';\n                                                    }}\n                                                />\n                                            ) : (\n                                                <div className=\"thumbnail-placeholder\">ðŸ“¹</div>\n                                            )}\n                                        </div>\n                                        <div className=\"video-item-info\">\n                                            <h4 className=\"video-item-title\">{video.title}</h4>\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default CourseDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}