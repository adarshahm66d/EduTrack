{"ast":null,"code":"var _jsxFileName = \"/app/src/components/VideoPlayer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport './VideoPlayer.css';\n\n// Extract YouTube video ID from various URL formats\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst extractVideoId = videoIdOrUrl => {\n  if (!videoIdOrUrl) return null;\n\n  // If it's already an 11-character ID, return it\n  if (videoIdOrUrl.length === 11 && /^[a-zA-Z0-9_-]{11}$/.test(videoIdOrUrl)) {\n    return videoIdOrUrl;\n  }\n\n  // Try to extract from YouTube URL\n  const patterns = [/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/)([a-zA-Z0-9_-]{11})/, /youtube\\.com\\/.*[?&]v=([a-zA-Z0-9_-]{11})/];\n  for (const pattern of patterns) {\n    const match = videoIdOrUrl.match(pattern);\n    if (match && match[1]) {\n      return match[1];\n    }\n  }\n  return null;\n};\nconst VideoPlayer = ({\n  videoId,\n  videoUrl,\n  onVideoEnd,\n  courseId,\n  videoDbId,\n  onProgressUpdate,\n  onVideoStart\n}) => {\n  _s();\n  const iframeRef = useRef(null);\n  const progressIntervalRef = useRef(null);\n  const lastProgressTimeRef = useRef(0);\n\n  // Use videoUrl if provided, otherwise use videoId\n  const source = videoUrl || videoId;\n  const extractedId = extractVideoId(source);\n  useEffect(() => {\n    // Listen for YouTube player events\n    const handleMessage = event => {\n      if (event.origin !== 'https://www.youtube.com') return;\n      try {\n        const data = JSON.parse(event.data);\n        if (data.event === 'onStateChange') {\n          // 0 = ended, 1 = playing, 2 = paused\n          if (data.info === 0 && onVideoEnd) {\n            onVideoEnd();\n          }\n          // Start tracking when video starts playing\n          if (data.info === 1 && onVideoStart) {\n            onVideoStart();\n          }\n        }\n      } catch (e) {\n        // Ignore parse errors\n      }\n    };\n    window.addEventListener('message', handleMessage);\n    return () => window.removeEventListener('message', handleMessage);\n  }, [onVideoEnd, onVideoStart]);\n  if (!extractedId) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-player-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Invalid video URL. Please check the video link.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), source && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: '0.9rem',\n          marginTop: '0.5rem',\n          color: '#666'\n        },\n        children: [\"Original URL: \", source]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"video-player-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-player-container\",\n      children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n        ref: iframeRef,\n        className: \"video-iframe\",\n        src: `https://www.youtube.com/embed/${extractedId}?rel=0&modestbranding=1&enablejsapi=1&origin=${window.location.origin}`,\n        title: \"YouTube video player\",\n        frameBorder: \"0\",\n        allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\",\n        allowFullScreen: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n};\n_s(VideoPlayer, \"s/tR3EkEHZnRyf+DNrewMT6kBI0=\");\n_c = VideoPlayer;\nexport default VideoPlayer;\nvar _c;\n$RefreshReg$(_c, \"VideoPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","jsxDEV","_jsxDEV","extractVideoId","videoIdOrUrl","length","test","patterns","pattern","match","VideoPlayer","videoId","videoUrl","onVideoEnd","courseId","videoDbId","onProgressUpdate","onVideoStart","_s","iframeRef","progressIntervalRef","lastProgressTimeRef","source","extractedId","handleMessage","event","origin","data","JSON","parse","info","e","window","addEventListener","removeEventListener","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","fontSize","marginTop","color","ref","src","location","title","frameBorder","allow","allowFullScreen","_c","$RefreshReg$"],"sources":["/app/src/components/VideoPlayer.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport './VideoPlayer.css';\n\n// Extract YouTube video ID from various URL formats\nconst extractVideoId = (videoIdOrUrl) => {\n    if (!videoIdOrUrl) return null;\n    \n    // If it's already an 11-character ID, return it\n    if (videoIdOrUrl.length === 11 && /^[a-zA-Z0-9_-]{11}$/.test(videoIdOrUrl)) {\n        return videoIdOrUrl;\n    }\n    \n    // Try to extract from YouTube URL\n    const patterns = [\n        /(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/|youtube\\.com\\/embed\\/)([a-zA-Z0-9_-]{11})/,\n        /youtube\\.com\\/.*[?&]v=([a-zA-Z0-9_-]{11})/,\n    ];\n    \n    for (const pattern of patterns) {\n        const match = videoIdOrUrl.match(pattern);\n        if (match && match[1]) {\n            return match[1];\n        }\n    }\n    \n    return null;\n};\n\nconst VideoPlayer = ({ videoId, videoUrl, onVideoEnd, courseId, videoDbId, onProgressUpdate, onVideoStart }) => {\n    const iframeRef = useRef(null);\n    const progressIntervalRef = useRef(null);\n    const lastProgressTimeRef = useRef(0);\n    \n    // Use videoUrl if provided, otherwise use videoId\n    const source = videoUrl || videoId;\n    const extractedId = extractVideoId(source);\n    \n    useEffect(() => {\n        // Listen for YouTube player events\n        const handleMessage = (event) => {\n            if (event.origin !== 'https://www.youtube.com') return;\n            \n            try {\n                const data = JSON.parse(event.data);\n                if (data.event === 'onStateChange') {\n                    // 0 = ended, 1 = playing, 2 = paused\n                    if (data.info === 0 && onVideoEnd) {\n                        onVideoEnd();\n                    }\n                    // Start tracking when video starts playing\n                    if (data.info === 1 && onVideoStart) {\n                        onVideoStart();\n                    }\n                }\n            } catch (e) {\n                // Ignore parse errors\n            }\n        };\n        \n        window.addEventListener('message', handleMessage);\n        return () => window.removeEventListener('message', handleMessage);\n    }, [onVideoEnd, onVideoStart]);\n    \n    if (!extractedId) {\n        return (\n            <div className=\"video-player-error\">\n                <p>Invalid video URL. Please check the video link.</p>\n                {source && (\n                    <p style={{ fontSize: '0.9rem', marginTop: '0.5rem', color: '#666' }}>\n                        Original URL: {source}\n                    </p>\n                )}\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"video-player-wrapper\">\n            <div className=\"video-player-container\">\n                <iframe\n                    ref={iframeRef}\n                    className=\"video-iframe\"\n                    src={`https://www.youtube.com/embed/${extractedId}?rel=0&modestbranding=1&enablejsapi=1&origin=${window.location.origin}`}\n                    title=\"YouTube video player\"\n                    frameBorder=\"0\"\n                    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n                    allowFullScreen\n                ></iframe>\n            </div>\n        </div>\n    );\n};\n\nexport default VideoPlayer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}